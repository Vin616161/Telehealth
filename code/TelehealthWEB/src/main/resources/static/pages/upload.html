<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>upload模块快速使用</title>
    <link rel="stylesheet" href="../assets/libs/layui/css/layui.css" media="all">
</head>
<body>

<button type="button" class="layui-btn" id="test1">
    <i class="layui-icon">&#xe67c;</i>上传图片
</button>
<div><img id="demo"></div>


<script type="text/javascript" src="../assets/libs/layui/layui.js"></script>
<script type="text/javascript" src="../assets/common.js"></script>
<script>
    layui.use(['upload', 'admin'], function () {
        var upload = layui.upload;
        var admin = layui.admin;
        var $ = layui.jquery;

        //$('#demo').attr('src', src="../assets/images/logo.png");
        //执行实例
        var uploadInst = upload.render({
            elem: '#test1', //绑定元素
            url: base_server + 'file/upload',//上传接口
            data: {
                access_token: admin.getToken(),
                fileType: "image"

            },
            done: function (res) {
                //上传完毕回调
                $('#demo').attr('src', src=base_server + 'file?fileId='+res.fileId+'&access_token='+admin.getToken());
            },
            error: function () {
                //请求异常回调
            }
        });

    });
</script>
</body>
</html>